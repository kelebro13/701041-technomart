"use strict";var isIE=function(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1}(),EVENT={CLICK:"click",FOCUS:"focus",BLUR:"blur",SUBMIT:"submit",KEYDOWN:"keydown"},overlay=document.querySelector(".modal-overlay"),popups=document.querySelectorAll(".modal"),openMap=document.querySelector(".js-open-map"),popupMap=document.querySelector(".modal--map"),closeMap=document.querySelector(".js-close-map"),openFeedback=document.querySelector(".js-open-feedback"),popupFeedback=document.querySelector(".modal--feedback"),closeFeedback=document.querySelector(".js-close-feedback"),feedbackForm=document.querySelector(".feedback-form"),feedbackName=popupFeedback&&popupFeedback.querySelector("#feedback-name"),feedbackMail=popupFeedback&&popupFeedback.querySelector("#feedback-mail"),feedbackMessage=popupFeedback&&popupFeedback.querySelector("#feedback-message"),buyButtons=document.querySelectorAll(".js-buy"),popupBuyModal=document.querySelector(".modal--cart"),closeBuyModal=document.querySelector(".js-close-cart"),addBookmarkButtons=document.querySelectorAll(".js-add-bookmark"),storageName=localStorage.getItem("name"),storageMail=localStorage.getItem("mail");function closePopup(e){e.classList.remove("modal--show"),overlay.classList.remove("modal-overlay--show")}function openPopup(e){e.classList.add("modal--show"),overlay.classList.add("modal-overlay--show")}overlay.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),Array.prototype.forEach.call(popups,function(e){e.classList.contains("modal--show")&&closePopup(e)})}),openMap&&openMap.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),openPopup(popupMap)}),closeMap&&closeMap.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),closePopup(popupMap)}),openFeedback&&openFeedback.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),openPopup(popupFeedback),storageName&&(feedbackName.value=storageName),storageMail&&(feedbackMail.value=storageMail),storageName&&storageMail?feedbackMessage.focus():storageName?feedbackMail.focus():feedbackName.focus()}),closeFeedback&&closeFeedback.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),closePopup(popupFeedback)}),feedbackForm&&feedbackForm.addEventListener(EVENT.SUBMIT,function(e){feedbackName.value&&feedbackMail.value&&feedbackMessage.value?(feedbackName&&localStorage.setItem("name",feedbackName.value),feedbackMail&&localStorage.setItem("mail",feedbackMail.value)):e.preventDefault()}),buyButtons&&Array.prototype.forEach.call(buyButtons,function(e){isIE&&(e.addEventListener(EVENT.FOCUS,function(a){a.preventDefault(),e.parentElement.parentElement.parentElement.classList.add("card--current")}),e.addEventListener(EVENT.BLUR,function(a){a.preventDefault(),e.parentElement.parentElement.parentElement.classList.remove("card--current")})),e.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),openPopup(popupBuyModal)})}),closeBuyModal&&closeBuyModal.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),closePopup(popupBuyModal)}),window.addEventListener(EVENT.KEYDOWN,function(e){27===e.keyCode&&(Array.prototype.forEach.call(popups,function(e){e.classList.contains("modal--show")&&closePopup(e)}),overlay.classList.remove("modal-feedback--show"))}),Array.prototype.forEach.call(addBookmarkButtons,function(e){isIE&&(e.addEventListener(EVENT.FOCUS,function(a){a.preventDefault(),e.parentElement.parentElement.parentElement.classList.add("card--current")}),e.addEventListener(EVENT.BLUR,function(a){a.preventDefault(),e.parentElement.parentElement.parentElement.classList.remove("card--current")}))});
